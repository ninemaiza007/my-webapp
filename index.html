<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Global Time Experience</title>

<style>
    * { box-sizing: border-box; }

    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Segoe UI', system-ui, sans-serif;
        overflow: hidden;
        background: linear-gradient(135deg,#f5f7fa,#e4ecf7,#ffffff);
        background-size: 300% 300%;
        animation: bgMove 12s ease infinite;
    }

    @keyframes bgMove {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    #fireworks-canvas {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 0;
    }

    .glass-panel {
        position: relative;
        z-index: 10;
        padding: 60px 80px;
        border-radius: 30px;
        backdrop-filter: blur(25px);
        background: rgba(255,255,255,0.6);
        box-shadow:
            0 20px 50px rgba(0,0,0,0.08),
            inset 0 0 0 1px rgba(255,255,255,0.6);
        text-align: center;
        animation: fadeUp 1.5s ease;
    }

    @keyframes fadeUp {
        from { opacity:0; transform:translateY(30px);}
        to { opacity:1; transform:translateY(0);}
    }

    #big-clock {
        font-size: 6rem;
        font-weight: 600;
        letter-spacing: -2px;
        margin-bottom: 10px;
        background: linear-gradient(90deg,#000,#555);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 25px rgba(0,0,0,0.1);
    }

    #location {
        font-size: 1rem;
        color: #555;
        margin-bottom: 30px;
        letter-spacing: 1px;
    }

    .buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
    }

    .btn {
        padding: 12px 28px;
        border-radius: 50px;
        text-decoration: none;
        font-size: 0.95rem;
        font-weight: 500;
        transition: 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .primary {
        background: #000;
        color: #fff;
    }

    .primary:hover {
        background: #222;
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }

    .secondary {
        background: rgba(0,0,0,0.05);
        color: #000;
    }

    .secondary:hover {
        background: rgba(0,0,0,0.1);
        transform: translateY(-3px);
    }

    @media (max-width: 600px){
        #big-clock { font-size: 3rem; }
        .glass-panel { padding: 40px 30px; }
    }
</style>
</head>
<body>

<canvas id="fireworks-canvas"></canvas>

<div class="glass-panel">
    <div id="big-clock">00:00:00</div>
    <div id="location">Detecting location...</div>

    <div class="buttons">
        <a href="first.html" class="btn primary">Enter</a>
        <a href="ip-check.html" class="btn secondary">IP Check</a>
    </div>
</div>

<script>
/* ---------------- FIREWORK SYSTEM ---------------- */
const canvas = document.getElementById('fireworks-canvas');
const ctx = canvas.getContext('2d');
let particles = [];

function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

class Particle{
    constructor(x,y,color){
        this.x=x;
        this.y=y;
        this.color=color;
        this.velocity={
            x:(Math.random()-0.5)*10,
            y:(Math.random()-0.5)*10
        };
        this.alpha=1;
        this.friction=0.95;
    }
    draw(){
        ctx.globalAlpha=this.alpha;
        ctx.beginPath();
        ctx.arc(this.x,this.y,3,0,Math.PI*2);
        ctx.fillStyle=this.color;
        ctx.fill();
    }
    update(){
        this.velocity.x*=this.friction;
        this.velocity.y*=this.friction;
        this.x+=this.velocity.x;
        this.y+=this.velocity.y;
        this.alpha-=0.015;
    }
}

function triggerFirework(){
    const x=Math.random()*canvas.width;
    const y=Math.random()*canvas.height*0.6;
    const color=`hsl(${Math.random()*360},70%,50%)`;
    for(let i=0;i<40;i++){
        particles.push(new Particle(x,y,color));
    }
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach((p,i)=>{
        if(p.alpha<=0){
            particles.splice(i,1);
        } else{
            p.update();
            p.draw();
        }
    });
    requestAnimationFrame(animate);
}
animate();

/* ---------------- TIMEZONE FROM IP ---------------- */

let userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
let locationText = "";

async function detectIP(){
    try{
        const res = await fetch("https://ipapi.co/json/");
        const data = await res.json();
        if(data.timezone){
            userTimeZone = data.timezone;
            locationText = `${data.country_name} â€¢ ${data.timezone}`;
            document.getElementById("location").textContent = locationText;
        }
    }catch{
        document.getElementById("location").textContent = "Local Time";
    }
}

function updateClock(){
    const now = new Date();
    const formatter = new Intl.DateTimeFormat('en-GB',{
        timeZone:userTimeZone,
        hour:'2-digit',
        minute:'2-digit',
        second:'2-digit',
        hour12:false
    });

    const timeString = formatter.format(now);
    document.getElementById("big-clock").textContent = timeString;

    const parts=timeString.split(":");
    if(parseInt(parts[1])===0 && parseInt(parts[2])===0){
        for(let i=0;i<8;i++){
            setTimeout(triggerFirework,i*400);
        }
    }
}

detectIP().then(()=>{
    setInterval(updateClock,1000);
    updateClock();
});

window.addEventListener("click",triggerFirework);
</script>

</body>
</html>
